<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sneap - Technical Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        .code-block {
            background: #1f2937;
            color: #f9fafb;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }

        .highlight {
            background: #fef3c7;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">
    <div class="max-w-6xl mx-auto px-6 py-8">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">Sneap Technical Documentation</h1>
            <p class="text-xl text-gray-600">Architecture, APIs, and Implementation Details</p>
        </div>

        <!-- Navigation -->
        <nav class="mb-8 p-4 bg-white rounded-lg border">
            <div class="flex flex-wrap gap-4 justify-center">
                <a href="#overview" class="text-blue-600 hover:text-blue-800 font-medium">Overview</a>
                <a href="#architecture" class="text-blue-600 hover:text-blue-800 font-medium">Architecture</a>
                <a href="#trie" class="text-blue-600 hover:text-blue-800 font-medium">Trie System</a>
                <a href="#apis" class="text-blue-600 hover:text-blue-800 font-medium">APIs</a>
                <a href="#cache" class="text-blue-600 hover:text-blue-800 font-medium">Caching</a>
                <a href="#auth" class="text-blue-600 hover:text-blue-800 font-medium">Authentication</a>
                <a href="#completion" class="text-blue-600 hover:text-blue-800 font-medium">Completion</a>
            </div>
        </nav>

        <!-- Overview -->
        <section id="overview" class="mb-12 bg-white p-8 rounded-lg border">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">üìã Project Overview</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-xl font-semibold mb-3">What is Sneap?</h3>
                    <p class="text-gray-700 mb-4">
                        Sneap is an intelligent code snippet management system consisting of a VS Code extension
                        with a high-performance Fastify backend. It provides real-time code completion with
                        personalized suggestions and usage analytics.
                    </p>
                    <div class="bg-blue-50 p-4 rounded border">
                        <h4 class="font-semibold text-blue-900 mb-2">Key Features:</h4>
                        <ul class="text-blue-800 space-y-1">
                            <li>‚Ä¢ Ultra-fast prefix search (Trie algorithm)</li>
                            <li>‚Ä¢ Personalized snippet recommendations</li>
                            <li>‚Ä¢ Real-time usage analytics</li>
                            <li>‚Ä¢ JWT-based secure authentication</li>
                            <li>‚Ä¢ Multi-level caching system</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-3">Technology Stack</h3>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <span
                                class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-medium">Backend</span>
                            <span class="text-gray-700">Fastify + TypeScript + Drizzle ORM + SQLite</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span
                                class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-medium">Frontend</span>
                            <span class="text-gray-700">VS Code Extension API + TypeScript</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span
                                class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm font-medium">Admin</span>
                            <span class="text-gray-700">Alpine.js + Tailwind CSS</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span
                                class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm font-medium">Auth</span>
                            <span class="text-gray-700">JWT + bcryptjs</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Architecture -->
        <section id="architecture" class="mb-12 bg-white p-8 rounded-lg border">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">üèóÔ∏è System Architecture</h2>

            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4">Component Overview</h3>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="bg-blue-500 text-white p-4 rounded-lg mb-3">
                                <h4 class="font-bold">VS Code Extension</h4>
                                <p class="text-sm">Frontend Client</p>
                            </div>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>‚Ä¢ Completion Provider</li>
                                <li>‚Ä¢ Local Cache System</li>
                                <li>‚Ä¢ Usage Tracking</li>
                                <li>‚Ä¢ API Communication</li>
                            </ul>
                        </div>
                        <div class="text-center">
                            <div class="bg-green-500 text-white p-4 rounded-lg mb-3">
                                <h4 class="font-bold">Fastify Server</h4>
                                <p class="text-sm">Backend API</p>
                            </div>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>‚Ä¢ RESTful API Endpoints</li>
                                <li>‚Ä¢ Trie Search Engine</li>
                                <li>‚Ä¢ Authentication Layer</li>
                                <li>‚Ä¢ Database Operations</li>
                            </ul>
                        </div>
                        <div class="text-center">
                            <div class="bg-purple-500 text-white p-4 rounded-lg mb-3">
                                <h4 class="font-bold">SQLite Database</h4>
                                <p class="text-sm">Data Storage</p>
                            </div>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>‚Ä¢ Snippet Storage</li>
                                <li>‚Ä¢ Usage Metrics</li>
                                <li>‚Ä¢ User Preferences</li>
                                <li>‚Ä¢ API Key Management</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-4">Data Flow</h3>
                <div class="code-block">
                    <pre>1. User types in VS Code
2. Extension detects trigger (e.g., typing "log")
3. Extension checks local cache first
4. If miss, makes API call to /api/snippets/prefix
5. Backend searches Trie for matches
6. Results returned and cached locally
7. VS Code displays completion items
8. User selects snippet ‚Üí usage tracked</pre>
                </div>
            </div>
        </section>

        <!-- Trie System -->
        <section id="trie" class="mb-12 bg-white p-8 rounded-lg border">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">üå≥ Trie Search System</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">What is a Trie?</h3>
                    <p class="text-gray-700 mb-4">
                        A Trie (prefix tree) is a specialized tree data structure used for efficient string searching.
                        Each node represents a character, and paths from root to leaves represent complete strings.
                    </p>

                    <div class="bg-yellow-50 p-4 rounded border mb-4">
                        <h4 class="font-semibold text-yellow-900 mb-2">Why Trie for Snippets?</h4>
                        <ul class="text-yellow-800 space-y-1">
                            <li>‚Ä¢ <span class="highlight">O(m) search complexity</span> where m = prefix length</li>
                            <li>‚Ä¢ Perfect for autocomplete scenarios</li>
                            <li>‚Ä¢ Memory efficient for large datasets</li>
                            <li>‚Ä¢ Supports fuzzy matching with Levenshtein distance</li>
                        </ul>
                    </div>

                    <h4 class="font-semibold mb-2">Implementation Details:</h4>
                    <div class="code-block text-sm">
                        <pre>class SnippetTrie {
  root = new TrieNode();
  
  insert(snippet, id) {
    // Insert snippet prefix into trie
    // Store snippet ID at terminal nodes
  }
  
  search(prefix, limit, language) {
    // O(m) traversal to prefix node
    // DFS collection of all suffixes
    // Language filtering
    // Limit results
  }
  
  fuzzySearch(prefix, maxDistance, limit) {
    // Levenshtein distance calculation
    // Dynamic programming approach
  }
}</pre>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold mb-4">Performance Metrics</h3>
                    <div class="space-y-4">
                        <div class="bg-green-50 p-4 rounded border">
                            <h4 class="font-semibold text-green-900">Search Performance</h4>
                            <div class="text-green-800 mt-2">
                                <div class="flex justify-between">
                                    <span>Average search time:</span>
                                    <span class="font-mono">&lt; 2ms</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Memory usage:</span>
                                    <span class="font-mono">~50MB for 10k snippets</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Initialization time:</span>
                                    <span class="font-mono">~100ms</span>
                                </div>
                            </div>
                        </div>

                        <div class="bg-blue-50 p-4 rounded border">
                            <h4 class="font-semibold text-blue-900">Example Search</h4>
                            <div class="text-blue-800 mt-2 text-sm">
                                <div>Query: <code class="bg-white px-1 rounded">"log"</code></div>
                                <div>Results:</div>
                                <ul class="ml-4 mt-1">
                                    <li>‚Ä¢ console.log()</li>
                                    <li>‚Ä¢ logger.info()</li>
                                    <li>‚Ä¢ log.debug()</li>
                                </ul>
                                <div class="mt-2">Search time: <span class="font-mono">1.2ms</span></div>
                            </div>
                        </div>

                        <div class="bg-purple-50 p-4 rounded border">
                            <h4 class="font-semibold text-purple-900">Dual Search Strategy</h4>
                            <div class="text-purple-800 text-sm mt-2">
                                <div class="mb-2"><strong>Trie Search:</strong> Ultra-fast prefix matching</div>
                                <div><strong>SQLite Search:</strong> Complex queries with personalization</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- APIs -->
        <section id="apis" class="mb-12 bg-white p-8 rounded-lg border">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">üîå API Endpoints</h2>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Core APIs -->
                <div>
                    <h3 class="text-xl font-semibold mb-4">Core Snippet APIs</h3>
                    <div class="space-y-4">
                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-mono">GET</span>
                                <code class="text-sm">/api/snippets/prefix</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">Ultra-fast Trie-based prefix search</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Params:</strong> prefix, language, limit, fuzzy</div>
                                <div><strong>Usage:</strong> Real-time completion in VS Code</div>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-mono">GET</span>
                                <code class="text-sm">/api/snippets/search</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">Full-text search using SQLite</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Params:</strong> q, language, limit</div>
                                <div><strong>Usage:</strong> Complex search queries</div>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-mono">GET</span>
                                <code class="text-sm">/api/snippets</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">Personalized snippet recommendations</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Params:</strong> language, limit, userId</div>
                                <div><strong>Usage:</strong> Dashboard and personalized feeds</div>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span
                                    class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono">POST</span>
                                <code class="text-sm">/api/snippets/usage</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">Track snippet usage for analytics</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Body:</strong> snippetId, userId, language, wasAccepted</div>
                                <div><strong>Usage:</strong> Automatic tracking on snippet selection</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin APIs -->
                <div>
                    <h3 class="text-xl font-semibold mb-4">Admin & Management APIs</h3>
                    <div class="space-y-4">
                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span
                                    class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-mono">POST</span>
                                <code class="text-sm">/auth/login</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">JWT authentication with refresh tokens</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Body:</strong> username, password, rememberMe</div>
                                <div><strong>Returns:</strong> accessToken, refreshToken</div>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-mono">GET</span>
                                <code class="text-sm">/admin/api-keys</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">Manage API keys for client access</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Auth:</strong> JWT required</div>
                                <div><strong>Usage:</strong> Admin panel key management</div>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-mono">GET</span>
                                <code class="text-sm">/admin/stats</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">Comprehensive usage analytics</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Returns:</strong> snippetStats, usageStats, categoryStats</div>
                                <div><strong>Usage:</strong> Admin dashboard metrics</div>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <div class="flex items-center space-x-2 mb-2">
                                <span
                                    class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono">POST</span>
                                <code class="text-sm">/api/snippets</code>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">Create new snippets programmatically</p>
                            <div class="text-xs text-gray-600">
                                <div><strong>Body:</strong> name, prefix, body, description, scope</div>
                                <div><strong>Usage:</strong> Dynamic snippet creation</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-gray-50 p-6 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">API Response Format</h3>
                <div class="code-block">
                    <pre>{
  "success": true,
  "data": [...],
  "meta": {
    "searchTime": "1.2ms",
    "count": 15,
    "method": "trie",
    "engine": "Trie + Drizzle"
  }
}</pre>
                </div>
            </div>
        </section>

        <!-- Caching -->
        <section id="cache" class="mb-12 bg-white p-8 rounded-lg border">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">‚ö° Caching System</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">Frontend Caching (VS Code Extension)</h3>

                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded border">
                            <h4 class="font-semibold text-blue-900 mb-2">Memory Cache (LRU)</h4>
                            <div class="text-blue-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Capacity:</strong> 1000 entries</div>
                                <div>‚Ä¢ <strong>TTL:</strong> 5 minutes</div>
                                <div>‚Ä¢ <strong>Key Strategy:</strong> prefix + language</div>
                                <div>‚Ä¢ <strong>Purpose:</strong> Ultra-fast repeat queries</div>
                            </div>
                        </div>

                        <div class="bg-green-50 p-4 rounded border">
                            <h4 class="font-semibold text-green-900 mb-2">VS Code GlobalState</h4>
                            <div class="text-green-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Storage:</strong> Extension persistent storage</div>
                                <div>‚Ä¢ <strong>Capacity:</strong> ~10MB limit</div>
                                <div>‚Ä¢ <strong>Persistence:</strong> Survives VS Code restarts</div>
                                <div>‚Ä¢ <strong>Fallback:</strong> When API is unavailable</div>
                            </div>
                        </div>

                        <div class="bg-purple-50 p-4 rounded border">
                            <h4 class="font-semibold text-purple-900 mb-2">Cache Strategy</h4>
                            <div class="text-purple-800 text-sm">
                                <div class="code-block">
                                    <pre>1. Check memory cache
2. If miss, check GlobalState
3. If miss, call API
4. Store in both caches
5. Return results</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold mb-4">Backend Caching</h3>

                    <div class="space-y-4">
                        <div class="bg-orange-50 p-4 rounded border">
                            <h4 class="font-semibold text-orange-900 mb-2">Trie In-Memory Cache</h4>
                            <div class="text-orange-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Type:</strong> Complete dataset in RAM</div>
                                <div>‚Ä¢ <strong>Size:</strong> ~50MB for 10k snippets</div>
                                <div>‚Ä¢ <strong>Update:</strong> On server restart or snippet creation</div>
                                <div>‚Ä¢ <strong>Performance:</strong> Sub-millisecond search</div>
                            </div>
                        </div>

                        <div class="bg-red-50 p-4 rounded border">
                            <h4 class="font-semibold text-red-900 mb-2">Database Connection Pool</h4>
                            <div class="text-red-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Technology:</strong> SQLite with WAL mode</div>
                                <div>‚Ä¢ <strong>Connections:</strong> Single-threaded (SQLite limitation)</div>
                                <div>‚Ä¢ <strong>Optimization:</strong> Prepared statements</div>
                                <div>‚Ä¢ <strong>Indexes:</strong> On prefix, category, language</div>
                            </div>
                        </div>

                        <div class="bg-gray-100 p-4 rounded border">
                            <h4 class="font-semibold text-gray-900 mb-2">Cache Invalidation</h4>
                            <div class="text-gray-800 text-sm">
                                <div>‚Ä¢ <strong>Trie Updates:</strong> Manual reload via API</div>
                                <div>‚Ä¢ <strong>Client Cache:</strong> TTL-based expiration</div>
                                <div>‚Ä¢ <strong>Database:</strong> Real-time consistency</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                <h3 class="text-lg font-semibold text-yellow-900 mb-3">Verified Cache Implementation</h3>
                <div class="text-yellow-800 space-y-2">
                    <p><strong>Frontend (VS Code Extension):</strong></p>
                    <ul class="ml-4 space-y-1">
                        <li>‚Ä¢ <strong>Memory Cache:</strong> 100 entries with LRU eviction</li>
                        <li>‚Ä¢ <strong>Persistent Cache:</strong> 5000 entries via VS Code GlobalState</li>
                        <li>‚Ä¢ <strong>TTL:</strong> 5 minutes for both levels</li>
                        <li>‚Ä¢ <strong>Search Strategy:</strong> ‚â§3 chars = Trie, >3 chars = SQLite</li>
                        <li>‚Ä¢ <strong>Languages:</strong> JavaScript, TypeScript, JSX, TSX only</li>
                    </ul>
                    <p class="mt-3"><strong>Backend:</strong></p>
                    <ul class="ml-4 space-y-1">
                        <li>‚Ä¢ <strong>Trie in RAM:</strong> Complete dataset loaded at startup</li>
                        <li>‚Ä¢ <strong>Database:</strong> Drizzle ORM + SQLite with migrations</li>
                        <li>‚Ä¢ <strong>No connection pooling:</strong> SQLite single-threaded</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Authentication -->
        <section id="auth" class="mb-12 bg-white p-8 rounded-lg border">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">üîê Authentication System</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">JWT Architecture</h3>

                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded border">
                            <h4 class="font-semibold text-blue-900 mb-2">Access Tokens</h4>
                            <div class="text-blue-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Duration:</strong> 1 hour</div>
                                <div>‚Ä¢ <strong>Purpose:</strong> API access authorization</div>
                                <div>‚Ä¢ <strong>Storage:</strong> localStorage (admin panel)</div>
                                <div>‚Ä¢ <strong>Algorithm:</strong> HS256 (HMAC SHA-256)</div>
                            </div>
                        </div>

                        <div class="bg-green-50 p-4 rounded border">
                            <h4 class="font-semibold text-green-900 mb-2">Refresh Tokens</h4>
                            <div class="text-green-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Duration:</strong> 7 days</div>
                                <div>‚Ä¢ <strong>Purpose:</strong> Silent token renewal</div>
                                <div>‚Ä¢ <strong>Condition:</strong> "Remember me" only</div>
                                <div>‚Ä¢ <strong>Security:</strong> Separate secret key</div>
                            </div>
                        </div>

                        <div class="bg-purple-50 p-4 rounded border">
                            <h4 class="font-semibold text-purple-900 mb-2">API Key System</h4>
                            <div class="text-purple-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Format:</strong> prefix_randomString</div>
                                <div>‚Ä¢ <strong>Usage:</strong> VS Code extension auth</div>
                                <div>‚Ä¢ <strong>Management:</strong> Admin panel CRUD</div>
                                <div>‚Ä¢ <strong>Validation:</strong> Database lookup</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold mb-4">Security Implementation</h3>

                    <div class="space-y-4">
                        <div class="bg-red-50 p-4 rounded border">
                            <h4 class="font-semibold text-red-900 mb-2">Password Security</h4>
                            <div class="text-red-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Hashing:</strong> bcryptjs with salt rounds: 10</div>
                                <div>‚Ä¢ <strong>Storage:</strong> Hashed passwords only</div>
                                <div>‚Ä¢ <strong>Environment:</strong> Configurable via env vars</div>
                                <div>‚Ä¢ <strong>Default:</strong> admin/admin123 (change in production)</div>
                            </div>
                        </div>

                        <div class="bg-orange-50 p-4 rounded border">
                            <h4 class="font-semibold text-orange-900 mb-2">JWT Secrets</h4>
                            <div class="text-orange-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Access Secret:</strong> HMAC key for access tokens</div>
                                <div>‚Ä¢ <strong>Refresh Secret:</strong> Separate key for refresh tokens</div>
                                <div>‚Ä¢ <strong>Generation:</strong> 32-byte cryptographically secure</div>
                                <div>‚Ä¢ <strong>Rotation:</strong> Manual via environment update</div>
                            </div>
                        </div>

                        <div class="bg-gray-100 p-4 rounded border">
                            <h4 class="font-semibold text-gray-900 mb-2">Flow Example</h4>
                            <div class="text-gray-800 text-sm">
                                <div class="code-block">
                                    <pre>1. Admin login ‚Üí JWT access + refresh token
2. VS Code requests ‚Üí API key validation
3. Token expires ‚Üí Auto refresh (if available)
4. All API calls ‚Üí Bearer token or API key
5. Logout ‚Üí Clear localStorage tokens</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                <h3 class="text-lg font-semibold text-yellow-900 mb-3">Production Security Checklist</h3>
                <div class="grid md:grid-cols-2 gap-4 text-yellow-800">
                    <div>
                        <h4 class="font-semibold mb-2">Environment Variables:</h4>
                        <ul class="text-sm space-y-1">
                            <li>‚Ä¢ Set strong JWT_SECRET</li>
                            <li>‚Ä¢ Set unique REFRESH_SECRET</li>
                            <li>‚Ä¢ Change ADMIN_PASSWORD</li>
                            <li>‚Ä¢ Use ADMIN_PASSWORD_HASH for pre-hashed</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-2">Additional Security:</h4>
                        <ul class="text-sm space-y-1">
                            <li>‚Ä¢ Enable HTTPS in production</li>
                            <li>‚Ä¢ Implement rate limiting</li>
                            <li>‚Ä¢ Regular secret rotation</li>
                            <li>‚Ä¢ Monitor failed auth attempts</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Completion -->
        <section id="completion" class="mb-12 bg-white p-8 rounded-lg border">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">üéØ Code Completion System</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">VS Code Integration</h3>

                    <div class="space-y-4">
                        <div class="bg-blue-50 p-4 rounded border">
                            <h4 class="font-semibold text-blue-900 mb-2">Completion Provider</h4>
                            <div class="text-blue-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Trigger:</strong> On character typing</div>
                                <div>‚Ä¢ <strong>Languages:</strong> JavaScript, TypeScript, Python, etc.</div>
                                <div>‚Ä¢ <strong>Context:</strong> Current word at cursor</div>
                                <div>‚Ä¢ <strong>Debounce:</strong> 150ms to avoid excessive calls</div>
                            </div>
                        </div>

                        <div class="bg-green-50 p-4 rounded border">
                            <h4 class="font-semibold text-green-900 mb-2">Completion Items</h4>
                            <div class="text-green-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Label:</strong> Snippet prefix for display</div>
                                <div>‚Ä¢ <strong>Detail:</strong> Snippet description</div>
                                <div>‚Ä¢ <strong>Insert Text:</strong> Full snippet body</div>
                                <div>‚Ä¢ <strong>Kind:</strong> Snippet (for proper icon)</div>
                            </div>
                        </div>

                        <div class="bg-purple-50 p-4 rounded border">
                            <h4 class="font-semibold text-purple-900 mb-2">Smart Filtering</h4>
                            <div class="text-purple-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Language Context:</strong> Auto-detected from file</div>
                                <div>‚Ä¢ <strong>Prefix Matching:</strong> Intelligent prefix extraction</div>
                                <div>‚Ä¢ <strong>Relevance Scoring:</strong> Usage-based ranking</div>
                                <div>‚Ä¢ <strong>Personalization:</strong> User-specific preferences</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold mb-4">Search Strategy</h3>

                    <div class="space-y-4">
                        <div class="bg-orange-50 p-4 rounded border">
                            <h4 class="font-semibold text-orange-900 mb-2">Multi-Stage Search</h4>
                            <div class="text-orange-800 text-sm">
                                <div class="code-block">
                                    <pre>1. Extract current word prefix
2. Check local memory cache
3. Check VS Code GlobalState
4. API call to /api/snippets/prefix
5. Trie search on backend
6. Cache results locally
7. Transform to completion items</pre>
                                </div>
                            </div>
                        </div>

                        <div class="bg-red-50 p-4 rounded border">
                            <h4 class="font-semibold text-red-900 mb-2">Performance Optimization</h4>
                            <div class="text-red-800 text-sm space-y-1">
                                <div>‚Ä¢ <strong>Debouncing:</strong> Reduce API calls during fast typing</div>
                                <div>‚Ä¢ <strong>Caching:</strong> Multi-level cache hierarchy</div>
                                <div>‚Ä¢ <strong>Prefetching:</strong> Cache popular snippets</div>
                                <div>‚Ä¢ <strong>Lazy Loading:</strong> Load details on demand</div>
                            </div>
                        </div>

                        <div class="bg-gray-100 p-4 rounded border">
                            <h4 class="font-semibold text-gray-900 mb-2">Usage Tracking</h4>
                            <div class="text-gray-800 text-sm">
                                <div>‚Ä¢ Track when snippets are accepted/rejected</div>
                                <div>‚Ä¢ Record search context and performance</div>
                                <div>‚Ä¢ Build personalization data</div>
                                <div>‚Ä¢ Generate analytics for optimization</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-green-50 p-6 rounded-lg border border-green-200">
                <h3 class="text-lg font-semibold text-green-900 mb-3">Example Completion Flow</h3>
                <div class="code-block">
                    <pre>// User types "log" in JavaScript file
1. VS Code detects change, extracts "log"
2. Extension checks cache for "log" + "javascript"
3. Cache miss ‚Üí API call with prefix="log", language="javascript"
4. Backend searches Trie: finds console.log, logger.info, etc.
5. Results cached and returned as CompletionItems
6. VS Code displays completion list
7. User selects "console.log" ‚Üí Usage tracked automatically

Total time: < 50ms (typical)</pre>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center py-8 border-t bg-gray-50">
            <div class="text-gray-600">
                <p class="mb-2">Sneap Technical Documentation</p>
                <p class="text-sm">Generated for http://localhost:3000/info</p>
                <div class="mt-4 space-x-4">
                    <a href="/login" class="text-blue-600 hover:text-blue-800">Login</a>
                    <a href="/" class="text-blue-600 hover:text-blue-800">API Root</a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>

</html>